{"ast":null,"code":"import _slicedToArray from \"/Users/danfengyang/go/src/INFO441/collaborative-photo-management/clients/final-clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _readOnlyError from \"/Users/danfengyang/go/src/INFO441/collaborative-photo-management/clients/final-clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/readOnlyError\";\n\nvar _jsxFileName = \"/Users/danfengyang/go/src/INFO441/collaborative-photo-management/clients/final-clients/src/MainPage.js\",\n    _this = this;\n\nimport React, { useEffect, useState } from 'react';\nimport './Styles/MainPage.css';\nimport ReactDOM from 'react-dom';\nimport { checkPropTypes } from 'prop-types';\n\nvar MainPage = function MainPage(props) {\n  //data structure for getting images\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      imgDataList = _useState2[0],\n      setImgDataList = _useState2[1]; //data structure for getting tags\n\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      tagDataList = _useState4[0],\n      setTagDataList = _useState4[1]; //variable to store user imput tag name\n\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      tagText = _useState6[0],\n      setTagText = _useState6[1]; //map to store binding between tag id and object\n\n\n  var _useState7 = useState({}),\n      _useState8 = _slicedToArray(_useState7, 2),\n      tagIDTable = _useState8[0],\n      setTagIDTable = _useState8[1]; //variable to store selected tag\n\n\n  var _useState9 = useState(-1),\n      _useState10 = _slicedToArray(_useState9, 2),\n      tag = _useState10[0],\n      setTag = _useState10[1]; // let tagIDTable = {};\n  // Fetch all img data\n\n\n  console.log(localStorage.getItem(\"Authorization\"));\n  useEffect(function () {\n    fetch(\"https://api.xutiancheng.me/v1/photos\", {\n      method: 'get',\n      headers: new Headers({\n        // 'Authorization': \"Bearer 6Ktu0thS3MI4dDnE8HY7TH_PMybp0xiEXTobOSh5LFdt28-ma7TAKgPg04slyj40TI8qjpI8LSgoishrdViUyg==\",\n        'Authorization': localStorage.getItem(\"Authorization\")\n      })\n    }).then(function (resp) {\n      return resp.json();\n    }).then(function (data) {\n      setImgDataList(data);\n    });\n  }); // Fetch all tag data\n\n  useEffect(function () {\n    fetch(\"https://api.xutiancheng.me/v1/tags\", {\n      method: 'get',\n      headers: new Headers({\n        // 'Authorization': \"Bearer 6Ktu0thS3MI4dDnE8HY7TH_PMybp0xiEXTobOSh5LFdt28-ma7TAKgPg04slyj40TI8qjpI8LSgoishrdViUyg==\",\n        'Authorization': localStorage.getItem(\"Authorization\")\n      })\n    }).then(function (resp) {\n      return resp.json();\n    }).then(function (data) {\n      for (var index = 0; index < data.length; index++) {\n        var element = data[index];\n        var obj = {};\n        obj[element.id] = element.name;\n        Object.assign(tagIDTable, obj);\n      }\n\n      setTagDataList(data);\n    });\n  });\n\n  function setTagIDTable(data) {\n    console.log(\"tagIDTable\");\n\n    for (var index = 0; index < data.length; index++) {\n      var element = data[index];\n      var obj = {};\n      obj[element.id] = element.name;\n      Object.assign(tagIDTable, obj);\n    }\n  } // //TODO:\n  // //assign tag id and name to the tag id table\n  // let setTagIDTable = (data) => {\n  //     Object.assign(tagIDTable, {data.id : data});\n  // }\n\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(TagButtonList, {\n    tags: tagDataList,\n    onClick: setTag,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }), React.createElement(ImgCardList, {\n    tag: tag,\n    imgDataList: imgDataList,\n    tagIDTable: tagIDTable,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }), React.createElement(TagTextField, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }));\n}; //populates the tag buttons into a list\n\n\nvar TagButtonList = function TagButtonList(props) {\n  var TagLists = props.tags.map(function (data) {\n    return React.createElement(TagButton, {\n      key: data.id,\n      tag: data,\n      onClick: props.onClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    });\n  });\n  return React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      \"flexDirection\": \"row\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, TagLists);\n}; //TODO:\n//gets the new tag name typed by user, after user press 'Enter', pass it to /v1/tags\n//with payload: {\"name\": \"tagname\"}\n\n\nvar TagTextField = function TagTextField() {\n  return React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"type tag to upload...\",\n    onChange: function onChange(event) {\n      _this.setState({\n        tagText: event.target.value\n      });\n    },\n    onKeyPress: function onKeyPress(event) {\n      if (event.key === 'Enter') {\n        useEffect(function () {\n          // POST request using fetch inside useEffect React hook\n          var requestOptions = {\n            method: 'POST',\n            body: JSON.stringify({\n              name: \"tagText\"\n            })\n          }; // fetch(\"https://api.xutiancheng.me/v1/tags\", requestOptions)\n          //     .then(response => response.json())\n          //     .then(console.log(response));\n          // empty dependency array means this effect will only run once (like componentDidMount in classes)\n        }, []);\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  });\n}; //individual button showing each tag\n\n\nvar TagButton = function TagButton(props) {\n  return React.createElement(\"button\", {\n    onClick: props.tag.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, props.tag.name); // return <button onClick={props.onClick(props.tag.id)}>props.tag.name</button>;\n}; //populates the image cards into a list\n\n\nvar ImgCardList = function ImgCardList(props) {\n  var photoListItems;\n\n  if (props.tag === -1) {\n    photoListItems = props.imgDataList.map(function (data) {\n      // return <ImgCard key={data.id} img={data} tags={props.tags}/>\n      return React.createElement(ImgCard, {\n        key: data.id,\n        img: data,\n        style: {\n          display: \"flex\",\n          \"flex-wrap\": \"wrap\",\n          \"flexDirection\": \"row\"\n        },\n        tagIDTable: props.tagIDTable,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      });\n    });\n  } else {\n    photoListItems = props.imgDataList.map(function (data) {\n      if (data.tags.includes(props.tag)) {\n        // return <ImgCard key={data.id} img={data} tags={props.tags}/>\n        return React.createElement(ImgCard, {\n          key: data.id,\n          img: data,\n          style: {\n            display: \"flex\",\n            \"flex-wrap\": \"wrap\",\n            \"flexDirection\": \"row\"\n          },\n          tagIDTable: props.tagIDTable,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        });\n      }\n    });\n  }\n\n  return photoListItems;\n}; //individual image card, still missing function that when clicked,\n//lets user add a tag for this photo\n\n\nvar ImgCard = function ImgCard(props) {\n  //TODO:\n  // let displayTags = props.img.tags.map((item, i) => (\n  //     <p>{tagIDTable[item.id].name}</p>\n  // ));\n  var tagNameList = [];\n\n  for (var index = 0; index < props.img.tags.length; index++) {\n    console.log(props.tagIDTable);\n    var tagID = props.tagIDTable.tags[index];\n    tagNameList.push(tagID);\n  }\n\n  console.log(tagNameList);\n  return (// <div>\n    React.createElement(\"img\", {\n      src: props.img.url,\n      style: {\n        width: \"100px\",\n        height: \"100px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }) //     {/* <button onClick={}>Add Tag</button> */}\n    //     {/* {displayTags} */}\n    //  {/* </div>); */}\n\n  );\n}; //TODO: bind image to a new tag name input by user and post \n//it to /v1/photos/:photoID/tag/:tagID \n\n\nvar BindTagImg = function BindTagImg() {};\n\nexport default MainPage;","map":{"version":3,"sources":["/Users/danfengyang/go/src/INFO441/collaborative-photo-management/clients/final-clients/src/MainPage.js"],"names":["React","useEffect","useState","ReactDOM","checkPropTypes","MainPage","props","imgDataList","setImgDataList","tagDataList","setTagDataList","tagText","setTagText","tagIDTable","setTagIDTable","tag","setTag","console","log","localStorage","getItem","fetch","method","headers","Headers","then","resp","json","data","index","length","element","obj","id","name","Object","assign","TagButtonList","TagLists","tags","map","onClick","display","TagTextField","event","setState","target","value","key","requestOptions","body","JSON","stringify","TagButton","ImgCardList","photoListItems","includes","ImgCard","tagNameList","img","tagID","push","url","width","height","BindTagImg"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './Styles/MainPage.css';\n\nimport ReactDOM from 'react-dom';\nimport { checkPropTypes } from 'prop-types';\n\nconst MainPage = (props) => {\n    //data structure for getting images\n    const [imgDataList,setImgDataList] = useState([]);\n    //data structure for getting tags\n    const [tagDataList,setTagDataList] = useState([]);\n    //variable to store user imput tag name\n    const [tagText, setTagText] = useState(\"\");\n\n    //map to store binding between tag id and object\n    const [tagIDTable, setTagIDTable] = useState({});\n    //variable to store selected tag\n    const [tag,setTag] = useState(-1);\n\n    // let tagIDTable = {};\n\n    // Fetch all img data\n    console.log(localStorage.getItem(\"Authorization\"));\n    useEffect(() => {\n        fetch(\"https://api.xutiancheng.me/v1/photos\",  { \n            method: 'get', \n            headers: new Headers({\n                // 'Authorization': \"Bearer 6Ktu0thS3MI4dDnE8HY7TH_PMybp0xiEXTobOSh5LFdt28-ma7TAKgPg04slyj40TI8qjpI8LSgoishrdViUyg==\",\n                'Authorization': localStorage.getItem(\"Authorization\"), \n            })\n          })\n        .then(resp => resp.json())\n        .then(data => {setImgDataList(data)})\n    });\n    // Fetch all tag data\n    useEffect(() => {\n        fetch(\"https://api.xutiancheng.me/v1/tags\",  { \n            method: 'get', \n            headers: new Headers({\n                // 'Authorization': \"Bearer 6Ktu0thS3MI4dDnE8HY7TH_PMybp0xiEXTobOSh5LFdt28-ma7TAKgPg04slyj40TI8qjpI8LSgoishrdViUyg==\",\n              'Authorization': localStorage.getItem(\"Authorization\"), \n            })\n          })\n        .then(resp => resp.json())\n        .then(data => \n        {   \n            for (let index = 0; index < data.length; index++) {\n                const element = data[index];\n                let obj={};\n                obj[element.id] = element.name;\n                Object.assign(tagIDTable, obj);\n    \n            }\n            setTagDataList(data);\n        })\n\n\n    });\n\n    function setTagIDTable(data) {\n        console.log(\"tagIDTable\");\n        for (let index = 0; index < data.length; index++) {\n            const element = data[index];\n            let obj={};\n            obj[element.id] = element.name;\n            Object.assign(tagIDTable, obj);\n\n        }\n    }\n    \n    // //TODO:\n    // //assign tag id and name to the tag id table\n    // let setTagIDTable = (data) => {\n    //     Object.assign(tagIDTable, {data.id : data});\n    // }\n    \n    return (\n    <div>\n        <TagButtonList tags={tagDataList} onClick={setTag}/>\n        <ImgCardList tag={tag} imgDataList={imgDataList} tagIDTable={tagIDTable}/>\n        {/* <ImgCardList tags={tagDataList} tag={tag} imgDataList={imgDataList}/> */}\n        <TagTextField></TagTextField>\n    </div>\n    );\n    \n}\n\n//populates the tag buttons into a list\nconst TagButtonList = (props)=>{\n    const TagLists = props.tags.map(data=><TagButton key={data.id} tag={data} onClick={props.onClick}/>);\n    return (<div style={{display:\"flex\",\"flexDirection\": \"row\"}}>{TagLists}</div>)\n}\n\n//TODO:\n//gets the new tag name typed by user, after user press 'Enter', pass it to /v1/tags\n//with payload: {\"name\": \"tagname\"}\nconst TagTextField = () => {\n    return <input\n    type=\"text\"\n    placeholder=\"type tag to upload...\"\n    onChange={event => {this.setState({tagText: event.target.value})}}\n    onKeyPress={event => {\n                if (event.key === 'Enter') {\n                    useEffect(() => {\n                        // POST request using fetch inside useEffect React hook\n                        const requestOptions = {\n                            method: 'POST',\n                            body: JSON.stringify({ name: \"tagText\" })\n                        };\n                        // fetch(\"https://api.xutiancheng.me/v1/tags\", requestOptions)\n                        //     .then(response => response.json())\n                        //     .then(console.log(response));\n                    \n                    // empty dependency array means this effect will only run once (like componentDidMount in classes)\n                    }, []);\n                }\n              }}\n    />;\n};\n\n//individual button showing each tag\nconst TagButton = (props)=>{\n        return <button onClick={props.tag.id}>{props.tag.name}</button>;\n\n    // return <button onClick={props.onClick(props.tag.id)}>props.tag.name</button>;\n}\n\n//populates the image cards into a list\nconst ImgCardList = (props) => {\n    var photoListItems;\n    if (props.tag === -1) {\n        photoListItems = props.imgDataList.map((data) => {\n            // return <ImgCard key={data.id} img={data} tags={props.tags}/>\n\n            return <ImgCard key={data.id} img={data} style={{display:\"flex\",\"flex-wrap\":\"wrap\",\"flexDirection\": \"row\"}}  tagIDTable={props.tagIDTable}/>\n        });\n    } else {\n        photoListItems = props.imgDataList.map((data) => {\n            if (data.tags.includes(props.tag)){\n                // return <ImgCard key={data.id} img={data} tags={props.tags}/>\n\n                return <ImgCard key={data.id} img={data} style={{display:\"flex\",\"flex-wrap\":\"wrap\",\"flexDirection\": \"row\"}} tagIDTable={props.tagIDTable}/>\n            }\n        });\n    }\n    \n    return (photoListItems)\n}\n\n//individual image card, still missing function that when clicked,\n//lets user add a tag for this photo\nconst ImgCard = (props) =>{\n    //TODO:\n    // let displayTags = props.img.tags.map((item, i) => (\n    //     <p>{tagIDTable[item.id].name}</p>\n    // ));\n    let tagNameList = [];\n    for (let index = 0; index < props.img.tags.length; index++) {\n        console.log(props.tagIDTable);\n        let tagID = props.tagIDTable.tags[index];\n        tagNameList.push(tagID);\n    }\n    console.log(tagNameList);\n    \n    return(\n    // <div>\n        <img src={props.img.url} style={{width:\"100px\",height:\"100px\"}}/>\n\n    //     {/* <button onClick={}>Add Tag</button> */}\n    //     {/* {displayTags} */}\n    //  {/* </div>); */}\n     );\n    \n    \n}\n\n//TODO: bind image to a new tag name input by user and post \n//it to /v1/photos/:photoID/tag/:tagID \nconst BindTagImg = ()=>{\n    \n}\n\n\nexport default MainPage;"]},"metadata":{},"sourceType":"module"}