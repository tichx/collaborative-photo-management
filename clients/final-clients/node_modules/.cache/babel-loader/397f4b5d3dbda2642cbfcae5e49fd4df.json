{"ast":null,"code":"import _regeneratorRuntime from \"/Users/danfengyang/go/src/INFO441/collaborative-photo-management/clients/final-clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/danfengyang/go/src/INFO441/collaborative-photo-management/clients/final-clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/danfengyang/go/src/INFO441/collaborative-photo-management/clients/final-clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/danfengyang/go/src/INFO441/collaborative-photo-management/clients/final-clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/danfengyang/go/src/INFO441/collaborative-photo-management/clients/final-clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/danfengyang/go/src/INFO441/collaborative-photo-management/clients/final-clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/danfengyang/go/src/INFO441/collaborative-photo-management/clients/final-clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/danfengyang/go/src/INFO441/collaborative-photo-management/clients/final-clients/src/Components/Main/Components/UploadImage/UploadImage.js\";\nimport React, { Component } from 'react';\nimport api from '../../../../Constants/APIEndpoints/APIEndpoints';\nimport Errors from '../../../Errors/Errors';\n\nvar UploadImage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UploadImage, _Component);\n\n  function UploadImage(props) {\n    var _this;\n\n    _classCallCheck(this, UploadImage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UploadImage).call(this, props));\n    _this.sendRequest =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var file, data, response, error;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              // e.preventDefault();\n              file = _this.state.file;\n              data = new FormData();\n              data.append('file', file);\n              console.log(file);\n              _context.next = 6;\n              return fetch(api.base + api.handlers.upload, {\n                method: \"POST\",\n                body: data,\n                headers: new Headers({\n                  \"Authorization\": localStorage.getItem(\"Authorization\")\n                })\n              });\n\n            case 6:\n              response = _context.sent;\n\n              if (!(response.status >= 300)) {\n                _context.next = 14;\n                break;\n              }\n\n              _context.next = 10;\n              return response.text();\n\n            case 10:\n              error = _context.sent;\n              console.log(error);\n\n              _this.setError(error);\n\n              return _context.abrupt(\"return\");\n\n            case 14:\n              alert(\"Upload Successful\"); // TODO make this better by refactoring errors\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.handleFile = function () {\n      con;\n\n      _this.setState({\n        file: document.querySelector('input[type=\"file\"]').files[0]\n      });\n\n      _this.sendRequest();\n    };\n\n    _this.setError = function (error) {\n      _this.setState({\n        error: error\n      });\n    };\n\n    _this.state = {\n      file: null,\n      error: ''\n    };\n    return _this;\n  }\n\n  _createClass(UploadImage, [{\n    key: \"render\",\n    // submitPhoto = ()\n    value: function render() {\n      var _this$state = this.state,\n          firstName = _this$state.firstName,\n          lastName = _this$state.lastName,\n          error = _this$state.error;\n      return React.createElement(React.Fragment, null, React.createElement(Errors, {\n        error: error,\n        setError: this.setError,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, \"Upload a new image\"), React.createElement(\"form\", {\n        target: \"_blank\",\n        encType: \"multipart/form-data\",\n        action: \"https://api.xutiancheng.me/v1/upload/\",\n        method: \"post\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"file\",\n        name: \"file\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"upload\",\n        onClick: this.handleFile,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return UploadImage;\n}(Component);\n\nexport default UploadImage;","map":{"version":3,"sources":["/Users/danfengyang/go/src/INFO441/collaborative-photo-management/clients/final-clients/src/Components/Main/Components/UploadImage/UploadImage.js"],"names":["React","Component","api","Errors","UploadImage","props","sendRequest","file","state","data","FormData","append","console","log","fetch","base","handlers","upload","method","body","headers","Headers","localStorage","getItem","response","status","text","error","setError","alert","handleFile","con","setState","document","querySelector","files","firstName","lastName"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport api from '../../../../Constants/APIEndpoints/APIEndpoints';\nimport Errors from '../../../Errors/Errors';\n\nclass UploadImage extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            file: null,\n            error: ''\n        }\n    }\n\n    sendRequest = async () => {\n        // e.preventDefault();\n        const { file } = this.state;\n        let data = new FormData()\n        data.append('file', file);\n        console.log(file);\n        const response = await fetch(api.base + api.handlers.upload, {\n            method: \"POST\",\n            body: data,\n            headers: new Headers({\n                \"Authorization\": localStorage.getItem(\"Authorization\"),\n            })\n        });\n        if (response.status >= 300) {\n            const error = await response.text();\n            console.log(error);\n            this.setError(error);\n            return;\n        }\n        alert(\"Upload Successful\"); // TODO make this better by refactoring errors\n    }\n\n    handleFile = () => {\n        con\n        this.setState({\n            file: document.querySelector('input[type=\"file\"]').files[0]\n        });\n        this.sendRequest();\n    }\n\n    setError = (error) => {\n        this.setState({ error })\n    }\n\n    // submitPhoto = ()\n    \n    render() {\n        const { firstName, lastName, error } = this.state;\n        return <>\n            <Errors error={error} setError={this.setError} />\n            <div>Upload a new image</div>\n            <form\n                target=\"_blank\"\n                encType=\"multipart/form-data\"\n                action=\"https://api.xutiancheng.me/v1/upload/\"\n                method=\"post\"\n                >\n                <input type=\"file\" name=\"file\" />\n                {/* <input type=\"submit\" value=\"upload\"/>    */}\n                <input type=\"submit\" value=\"upload\" onClick={this.handleFile} />   \n            </form>\n        </>\n    }\n\n}\n\nexport default UploadImage;"]},"metadata":{},"sourceType":"module"}