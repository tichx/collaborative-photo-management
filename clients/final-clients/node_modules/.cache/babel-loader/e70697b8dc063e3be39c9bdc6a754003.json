{"ast":null,"code":"import _regeneratorRuntime from \"/Users/danfengyang/go/src/INFO441/collaborative-photo-management/clients/441-clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/danfengyang/go/src/INFO441/collaborative-photo-management/clients/441-clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/danfengyang/go/src/INFO441/collaborative-photo-management/clients/441-clients/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/danfengyang/go/src/INFO441/collaborative-photo-management/clients/441-clients/src/Components/Main/Components/SignOutButton/SignOutButton.js\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport api from '../../../../Constants/APIEndpoints/APIEndpoints';\nimport Errors from '../../../Errors/Errors';\n\nvar SignOutButton = function SignOutButton(_ref) {\n  var setAuthToken = _ref.setAuthToken,\n      setUser = _ref.setUser;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  return React.createElement(React.Fragment, null, React.createElement(\"button\", {\n    onClick:\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var response, _error;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                _context.next = 3;\n                return fetch(api.base + api.handlers.sessionsMine, {\n                  method: \"DELETE\",\n                  headers: new Headers({\n                    \"Authorization\": localStorage.getItem(\"Authorization\")\n                  })\n                });\n\n              case 3:\n                response = _context.sent;\n\n                if (!(response.status >= 300)) {\n                  _context.next = 10;\n                  break;\n                }\n\n                _context.next = 7;\n                return response.text();\n\n              case 7:\n                _error = _context.sent;\n                setError(_error);\n                return _context.abrupt(\"return\");\n\n              case 10:\n                //localStorage.removeItem(\"Authorization\");\n                setError(\"\");\n                setAuthToken(\"\");\n                setUser(null);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 9\n    },\n    __self: this\n  }, \"Sign out\"), error && React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28\n    },\n    __self: this\n  }, React.createElement(Errors, {\n    error: error,\n    setError: setError,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  })));\n};\n\nSignOutButton.propTypes = {\n  setAuthToken: PropTypes.func.isRequired,\n  setUser: PropTypes.func.isRequired\n};\nexport default SignOutButton;","map":{"version":3,"sources":["/Users/danfengyang/go/src/INFO441/collaborative-photo-management/clients/441-clients/src/Components/Main/Components/SignOutButton/SignOutButton.js"],"names":["React","useState","PropTypes","api","Errors","SignOutButton","setAuthToken","setUser","error","setError","e","preventDefault","fetch","base","handlers","sessionsMine","method","headers","Headers","localStorage","getItem","response","status","text","propTypes","func","isRequired"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,GAAP,MAAgB,iDAAhB;AACA,OAAOC,MAAP,MAAmB,wBAAnB;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,OAA+B;AAAA,MAA5BC,YAA4B,QAA5BA,YAA4B;AAAA,MAAdC,OAAc,QAAdA,OAAc;;AAAA,kBACvBN,QAAQ,CAAC,EAAD,CADe;AAAA;AAAA,MAC1CO,KAD0C;AAAA,MACnCC,QADmC;;AAGjD,SAAO,0CAAE;AAAQ,IAAA,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAE,iBAAOC,CAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AACtBA,gBAAAA,CAAC,CAACC,cAAF;AADsB;AAAA,uBAECC,KAAK,CAACT,GAAG,CAACU,IAAJ,GAAWV,GAAG,CAACW,QAAJ,CAAaC,YAAzB,EAAuC;AAC/DC,kBAAAA,MAAM,EAAE,QADuD;AAE/DC,kBAAAA,OAAO,EAAE,IAAIC,OAAJ,CAAY;AACjB,qCAAiBC,YAAY,CAACC,OAAb,CAAqB,eAArB;AADA,mBAAZ;AAFsD,iBAAvC,CAFN;;AAAA;AAEhBC,gBAAAA,QAFgB;;AAAA,sBAQlBA,QAAQ,CAACC,MAAT,IAAmB,GARD;AAAA;AAAA;AAAA;;AAAA;AAAA,uBASED,QAAQ,CAACE,IAAT,EATF;;AAAA;AASZf,gBAAAA,MATY;AAUlBC,gBAAAA,QAAQ,CAACD,MAAD,CAAR;AAVkB;;AAAA;AAatB;AACAC,gBAAAA,QAAQ,CAAC,EAAD,CAAR;AACAH,gBAAAA,YAAY,CAAC,EAAD,CAAZ;AACAC,gBAAAA,OAAO,CAAC,IAAD,CAAP;;AAhBsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAF;;AAAA;AAAA;AAAA;AAAA,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAF,EAkBFC,KAAK,IACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAEA,KAAf;AAAsB,IAAA,QAAQ,EAAEC,QAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAnBD,CAAP;AAwBH,CA3BD;;AA6BAJ,aAAa,CAACmB,SAAd,GAA0B;AACtBlB,EAAAA,YAAY,EAAEJ,SAAS,CAACuB,IAAV,CAAeC,UADP;AAEtBnB,EAAAA,OAAO,EAAEL,SAAS,CAACuB,IAAV,CAAeC;AAFF,CAA1B;AAKA,eAAerB,aAAf","sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport api from '../../../../Constants/APIEndpoints/APIEndpoints';\nimport Errors from '../../../Errors/Errors';\n\nconst SignOutButton = ({ setAuthToken, setUser }) => {\n    const [error, setError] = useState(\"\");\n\n    return <><button onClick={async (e) => {\n        e.preventDefault();\n        const response = await fetch(api.base + api.handlers.sessionsMine, {\n            method: \"DELETE\",\n            headers: new Headers({\n                \"Authorization\": localStorage.getItem(\"Authorization\")\n            })\n        });\n        if (response.status >= 300) {\n            const error = await response.text();\n            setError(error);\n            return;\n        }\n        //localStorage.removeItem(\"Authorization\");\n        setError(\"\");\n        setAuthToken(\"\");\n        setUser(null);\n    }}>Sign out</button>\n        {error &&\n            <div>\n                <Errors error={error} setError={setError} />\n            </div>\n        }\n    </>\n}\n\nSignOutButton.propTypes = {\n    setAuthToken: PropTypes.func.isRequired,\n    setUser: PropTypes.func.isRequired\n}\n\nexport default SignOutButton;"]},"metadata":{},"sourceType":"module"}